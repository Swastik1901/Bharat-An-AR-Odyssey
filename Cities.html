<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Explore Cities - BHARAT : AN AR ODYSSEY</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/motion@10.17.0/dist/motion.umd.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;400&display=swap"
      rel="stylesheet"
    />
    <style>
      /* Base styles from the landing page */
      body {
        font-family: "Inter", sans-serif;
        background-color: #1a0f0f;
        background-image: radial-gradient(ellipse at center, #4a2a2a, #1a0f0f);
        color: #d4af37;
      }

      .main-title {
        font-family: "Cinzel", serif;
        letter-spacing: 0.1em;
        text-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
      }

      /* Fading Sanskrit Shlokas in the background */
      .sloka-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        z-index: -1;
        overflow: hidden;
      }

      .sloka {
        position: absolute;
        font-family: "Cinzel", serif;
        font-size: 2vw;
        color: rgba(212, 175, 55, 0.15);
        opacity: 0;
        animation: fadeInOut 25s infinite;
        user-select: none;
        text-shadow: 0 0 20px rgba(212, 175, 55, 0.1);
      }

      .sloka:nth-child(1) {
        top: 10%;
        left: 15%;
        animation-delay: 0s;
      }
      .sloka:nth-child(2) {
        top: 20%;
        left: 70%;
        animation-delay: 5s;
        font-size: 2.5vw;
      }
      .sloka:nth-child(3) {
        top: 50%;
        left: 40%;
        animation-delay: 10s;
      }
      .sloka:nth-child(4) {
        top: 80%;
        left: 80%;
        animation-delay: 15s;
        font-size: 1.8vw;
      }
      .sloka:nth-child(5) {
        top: 75%;
        left: 10%;
        animation-delay: 20s;
      }

      @keyframes fadeInOut {
        0%,
        100% {
          opacity: 0;
          transform: translateY(10px);
        }
        50% {
          opacity: 0.7;
          transform: translateY(0);
        }
      }

      /* Search Box styles */
      .search-box {
        background-color: rgba(0, 0, 0, 0.3);
        border: 2px solid rgba(212, 175, 55, 0.4);
        color: #d4af37;
        transition: all 0.3s ease;
      }

      .search-box:focus {
        outline: none;
        border-color: #d4af37;
        box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
      }

      /* Tilted Card animation styles */
      .city-card-figure {
        position: relative;
        width: 100%;
        height: 100%;
        perspective: 800px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        z-index: 1;
      }

      /* --- NEW: Back Button Styling --- */
      .back-button {
        position: fixed;
        top: 2rem;
        left: 2rem;
        z-index: 10;
        width: 48px; /* 3rem */
        height: 48px; /* 3rem */
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        background-color: rgba(26, 15, 15, 0.6);
        border: 1px solid rgba(212, 175, 55, 0.3);
        color: #d4af37;
        backdrop-filter: blur(8px);
        transition: all 0.3s ease;
      }
      .back-button:hover {
        background-color: rgba(212, 175, 55, 0.2);
        border-color: #d4af37;
        transform: scale(1.1);
      }
      .back-button svg {
        width: 24px;
        height: 24px;
      }

      /* Dimmed Glowing Effect */
      .city-card-figure::before {
        content: "";
        position: absolute;
        inset: -5px;
        z-index: -1;
        border-radius: calc(0.75rem + 5px);
        background-image: linear-gradient(45deg, #d4af37, #ffd700);
        filter: blur(20px);
        opacity: 0;
        transition: opacity 0.4s ease;
        transform: translateZ(-1px);
      }
      .city-card-figure:hover::before {
        opacity: 0.25; /* Dimmed the glow from 0.4 */
      }

      .city-card-inner {
        position: relative;
        transform-style: preserve-3d;
        background-color: rgba(26, 15, 15, 0.6);
        backdrop-filter: blur(10px);
        border-radius: 0.75rem; /* 12px */
        padding: 1rem; /* 16px */
        border: 1px solid rgba(212, 175, 55, 0.3);
        will-change: transform;
        width: 100%;
        height: 100%;
        transition: border-color 0.3s ease;
      }

      .city-card-figure:hover .city-card-inner {
        border-color: rgba(212, 175, 55, 0.6);
      }

      .city-card-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 0.375rem; /* 6px */
      }

      /* City name overlay style */
      .card-content {
        position: absolute;
        bottom: 1.5rem; /* 24px */
        left: 50%;
        transform: translateX(-50%);
        font-family: "Cinzel", serif;
        text-shadow: 0 1px 5px rgba(0, 0, 0, 0.7);
        background-color: rgba(0, 0, 0, 0.4);
        padding: 0.25rem 1rem;
        border-radius: 0.375rem;
        width: max-content;
        max-width: 90%;
        backdrop-filter: blur(3px);
        border: 1px solid rgba(212, 175, 55, 0.2);
      }
    </style>
  </head>
  <body class="p-4 sm:p-8 relative">
        <a href="../Landing.html" class="back-button" aria-label="Go back">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M15.75 19.5L8.25 12l7.5-7.5"
        />
      </svg>
    </a>
    <div class="absolute top-4 right-4 sm:top-8 sm:right-8 z-10">
      <a href="Login.html" id="login-link" class="bg-red-900 text-[#D4AF37] font-['Cinzel'] font-bold py-2 px-6 rounded-lg hover:bg-red-800 transition-colors duration-300 text-sm">
          Login
      </a>

      <div id="user-profile" class="hidden items-center space-x-4">
          <span class="text-white text-lg">Welcome, <span id="user-name" class="font-bold"></span>!</span>
          <button id="logout-btn" class="bg-red-900 text-[#D4AF37] font-['Cinzel'] font-bold py-2 px-6 rounded-lg hover:bg-red-800 transition-colors duration-300 text-sm">Logout</button>
      </div>
    </div>

    <div class="sloka-background">
      <span class="sloka">ॐ सर्वे भवन्तु सुखिनः</span>
      <span class="sloka">सत्यमेव जयते</span>
      <span class="sloka">अहिंसा परमो धर्मः</span>
      <span class="sloka">वसुधैव कुटुम्बकम्</span>
      <span class="sloka">यतो धर्मस्ततो जयः</span>
    </div>

    <main class="container mx-auto text-center">
      <h1
        class="main-title text-3xl sm:text-4xl md:text-5xl font-bold mb-4 mt-8"
      >
        Explore The Cities
      </h1>
      <p
        class="max-w-xl mx-auto text-sm md:text-base text-gray-400 mb-12 font-light tracking-wide"
      >
        Discover the soul of Bharat through its cities, each a chapter in a
        grand, timeless story.
      </p>

      <div class="mb-12">
        <input
          type="text"
          id="citySearch"
          onkeyup="searchCities()"
          placeholder="Search for a city..."
          class="search-box w-full max-w-lg mx-auto py-3 px-6 rounded-lg text-lg tracking-wider"
        />
      </div>

      <div
        id="cityGrid"
        class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-10 md:gap-12"
      >
        <a href="Kolkata/Heritage.html">
          <figure class="city-card-wrapper city-card-figure h-72">
            <div class="city-card-inner">
              <img
                src="Kolkata.jpeg"
                alt="Kolkata"
                class="city-card-img"
                onerror="this.onerror=null;this.src='https://placehold.co/400x300/4a2a2a/D4AF37?text=Image+Not+Found';"
              />
              <h3 class="card-content text-xl font-bold">Kolkata</h3>
            </div>
          </figure>
        </a>

        <a href="#">
          <figure class="city-card-wrapper city-card-figure h-72">
            <div class="city-card-inner">
              <img
                src="https://placehold.co/400x300/4a2a2a/D4AF37?text=Bhubneswar"
                alt="Jaipur"
                class="city-card-img"
                onerror="this.onerror=null;this.src='https://placehold.co/400x300/4a2a2a/D4AF37?text=Image+Not+Found';"
              />
              <h3 class="card-content text-xl font-bold">Bhubneswar</h3>
            </div>
          </figure>
        </a>

        <a href="#">
          <figure class="city-card-wrapper city-card-figure h-72">
            <div class="city-card-inner">
              <img
                src="https://placehold.co/400x300/4a2a2a/D4AF37?text=Mumbai"
                alt="Mumbai"
                class="city-card-img"
                onerror="this.onerror=null;this.src='https://placehold.co/400x300/4a2a2a/D4AF37?text=Image+Not+Found';"
              />
              <h3 class="card-content text-xl font-bold">Mumbai</h3>
            </div>
          </figure>
        </a>

        <a href="#">
          <figure class="city-card-wrapper city-card-figure h-72">
            <div class="city-card-inner">
              <img
                src="https://placehold.co/400x300/4a2a2a/D4AF37?text=Delhi"
                alt="Delhi"
                class="city-card-img"
                onerror="this.onerror=null;this.src='https://placehold.co/400x300/4a2a2a/D4AF37?text=Image+Not+Found';"
              />
              <h3 class="card-content text-xl font-bold">Delhi</h3>
            </div>
          </figure>
        </a>

        <a href="#">
          <figure class="city-card-wrapper city-card-figure h-72">
            <div class="city-card-inner">
              <img
                src="https://placehold.co/400x300/4a2a2a/D4AF37?text=Agra"
                alt="Agra"
                class="city-card-img"
                onerror="this.onerror=null;this.src='https://placehold.co/400x300/4a2a2a/D4AF37?text=Image+Not+Found';"
              />
              <h3 class="card-content text-xl font-bold">Agra</h3>
            </div>
          </figure>
        </a>

        <a href="#">
          <figure class="city-card-wrapper city-card-figure h-72">
            <div class="city-card-inner">
              <img
                src="https://placehold.co/400x300/4a2a2a/D4AF37?text=Patna"
                alt="Kolkata"
                class="city-card-img"
                onerror="this.onerror=null;this.src='https://placehold.co/400x300/4a2a2a/D4AF37?text=Image+Not+Found';"
              />
              <h3 class="card-content text-xl font-bold">Patna</h3>
            </div>
          </figure>
        </a>
      </div>
    </main>

    <script>
      // Search functionality
      function searchCities() {
        let input = document.getElementById("citySearch");
        let filter = input.value.toUpperCase();
        let grid = document.getElementById("cityGrid");
        // Select the <a> tags which are the actual grid items
        let cards = grid.getElementsByTagName("a");

        for (let i = 0; i < cards.length; i++) {
          // Find the h3 tag within the <a> tag
          let h3 = cards[i].getElementsByTagName("h3")[0];
          if (h3) {
            let txtValue = h3.textContent || h3.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
              // Show the <a> tag
              cards[i].style.display = "";
            } else {
              // Hide the <a> tag
              cards[i].style.display = "none";
            }
          }
        }
      }

      // Tilted Card Animation Logic
      document.addEventListener("DOMContentLoaded", () => {
        const cards = document.querySelectorAll(".city-card-figure");

        cards.forEach((card) => {
          const cardInner = card.querySelector(".city-card-inner");
          const rotateAmplitude = 12;
          const scaleOnHover = 1.05;

          const { spring } = motion;

          const rotateX = spring(0, { stiffness: 100, damping: 30, mass: 2 });
          const rotateY = spring(0, { stiffness: 100, damping: 30, mass: 2 });
          const scale = spring(1, { stiffness: 100, damping: 30, mass: 2 });

          card.addEventListener("mousemove", (e) => {
            const rect = card.getBoundingClientRect();
            const offsetX = e.clientX - rect.left - rect.width / 2;
            const offsetY = e.clientY - rect.top - rect.height / 2;

            const rotationX = (offsetY / (rect.height / 2)) * -rotateAmplitude;
            const rotationY = (offsetX / (rect.width / 2)) * rotateAmplitude;

            rotateX.set(rotationX);
            rotateY.set(rotationY);
          });

          card.addEventListener("mouseenter", () => {
            scale.set(scaleOnHover);
          });

          card.addEventListener("mouseleave", () => {
            scale.set(1);
            rotateX.set(0);
            rotateY.set(0);
          });

          motion.animate(
            (t) => {
              cardInner.style.transform = `scale(${scale.get()}) rotateX(${rotateX.get()}deg) rotateY(${rotateY.get()}deg)`;
            },
            {
              duration: Infinity,
            }
          );
        });
      });
    </script>
        <script>
        document.addEventListener('DOMContentLoaded', () => {
            const token = localStorage.getItem('token');
            const userName = localStorage.getItem('name');

            const loginLink = document.getElementById('login-link');
            const userProfile = document.getElementById('user-profile');
            const userNameSpan = document.getElementById('user-name');
            const logoutBtn = document.getElementById('logout-btn');

            if (token && userName) {
                // If the user is logged in:
                // 1. Hide the login link
                loginLink.classList.add('hidden');
                // 2. Show the user profile section
                userProfile.classList.remove('hidden');
                userProfile.style.display = 'flex'; // Make it visible
                userNameSpan.textContent = userName;

                // 3. Make the logout button work
                logoutBtn.addEventListener('click', () => {
                    localStorage.removeItem('token');
                    localStorage.removeItem('name');
                    window.location.href = 'Cities.html';
                });
            }
        });
    </script>
  </body>
</html>
